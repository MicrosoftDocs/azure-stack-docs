---
title: View logs to collect and review data in AKS hybrid
description: Learn how to view logs to collect and review data for my Azure Kubernetes Services (AKS) deployment in AKS hybrid.
author: sethmanheim
ms.topic: how-to
ms.date: 11/09/2022
ms.author: sethm 
ms.lastreviewed: 1/14/2022
ms.reviewer: EkeleAsonye

# Intent: As an IT Pro, I want to learn how to use and review log data in order to gain insight to my AKS deployment.
# Keyword: Log views troubleshooting MOC SDDC

---

# View logs to collect and review data in AKS hybrid

[!INCLUDE [applies-to-azure stack-hci-and-windows-server-skus](includes/aks-hci-applies-to-skus/aks-hybrid-applies-to-azure-stack-hci-windows-server-sku.md)]

This article describes how to collect data and view logs of events and configuration info from various components of AKS hybrid to check how AKS is working in your environment.

Logs present an important means to collect and review data from multiple sources and provide insights into the general condition of your environment. They are helpful when troubleshooting user applications and services, as the user may need to view the logs generated by different AKS components to determine possible points of failure when an issue arises. 

This article describes different useful log data that enables debugging of issues and also details some AKS and `kubectl` commands to view these logs.

## Use PowerShell commands to view logs

To get logs from your all your pods, run the [Get-AksHciLogs](./reference/ps/get-akshcilogs.md) PowerShell command. This command creates a zipped folder called `akshcilogs.zip` in your working directory for AKS hybrid.

Use the following parameters with `Get-AksHciLogs` to view logs and collect data:

- `Get-AksHciLogs -AgentLogs`: Get logs from the Microsoft On-premises Cloud (MOC) stack cloud agent and the node agent services. Command output is located in the *\akshcilogs* folder of your AKS hybrid working directory.
- `Get-AksHciLogs -EventLogs`: Get event logs that are logged to the Event Viewer.
- `Get-AksHciLogs -VirtualMachineLogs`: Get the logs from guest virtual machines created by AKS.
- `Get-AksHciLogs -KvaLogs`: Get logs from the AKS host.
- `Get-AksHciLogs -DownloadSdkLogs`: Get the download logs that are generated from downloading the binaries and images that AKS hybrid uses.
- `Get-AksHciLogs -BillingRecords`: Get billing records. The output is generally a text document located in the *\akshcilogs* folder of your working directory. It's similar to the following output:

  ![Screenshot showing a billing log created by running the Get-AksHciLogs command with the -BillingRecords parameter.](.\media\logs\billing-records.png)

## Microsoft On-premises Cloud

Microsoft On-premises Cloud (MOC) is the management stack that enables virtual machines on an Azure Stack HCI Software Defined Data Center (SDDC) to be managed in the cloud. 

Microsoft On-premises Cloud includes the following components:

- A single instance of a highly available cloud agent service deployed in the cluster. This agent runs on any one node in the Azure Stack HCI cluster and is configured to fail over to another node.
- A node agent running on every Azure Stack HCI physical node.

`Get-MocConfig` is a useful debugging tool that provides information such as the cloud configuration, node configuration, certification location of the node and the Microsoft On-premises Cloud. Output from running `Get-MocConfig` is similar to the following example output.

![Screenshot showing example output from running the Get-Moc-Config command for an Azure Stack HCI SDDC.](.\media\logs\get-moc-config.png)

## Kubernetes Virtual Appliance

Kubernetes Virtual Appliance (KVA) is a virtual machine image file that consists of a pre-configured operating system environment and a single application. The purpose of the KVA is to simplify delivery and operation of an application. Consequently, only necessary operating system components are included. The **Get-kvaConfig** command provides some important details that could help in debugging issues with misconfiguration, as shown in the following example output.

![Screenshot showing example output from the Get-Kva-Config command, which retrieves a Kubernetes Virtual Appliance configuration.](.\media\logs\get-kva-config.png)

## Kubectl commands

Kubernetes logs also have useful information about the health of your cluster and applications. The following commands provide important information:

- `kubectl get nodes` lists all nodes, and provides information about their status, roles, age after creation, and version.
- `kubectl get pods` lists all pods in the namespace, and gives their status.
- `kubectl get service` lists all services in the namespace.
- `kubectl get events` gives a timing sequence for activities associated with different Kubernetes objects.

## Next steps

In this topic, you learned how to view logs from multiple sources that provide insights into the general condition of your AKS hybrid environment.

- To monitor and troubleshoot further, [view _kubelet_ logs](./get-kubelet-logs.md).
